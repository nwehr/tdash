(this.webpackJsonptdash=this.webpackJsonptdash||[]).push([[0],{66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(29),s=n.n(r),i=n(3),o=n(0),u=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useCallback)((function(e){a(e.currentTarget.value)}),[]),s=Object(c.useCallback)((function(e){e.preventDefault(),localStorage.setItem("finnhub_api_token",n),window.location.reload()}),[n]);return Object(o.jsx)("div",{className:"get-token",children:Object(o.jsxs)("form",{onSubmit:s,className:"token",children:[Object(o.jsxs)("label",{children:[Object(o.jsx)("a",{href:"https://finnhub.io/",children:"Finnhub"})," API Token"]}),Object(o.jsx)("div",{children:Object(o.jsx)("input",{type:"text",onChange:r})}),Object(o.jsx)("div",{children:Object(o.jsx)("input",{type:"submit",value:"Submit"})})]})})},l=function(){var e=function(e,t){var n=Object(c.useState)(null),a=Object(i.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var n=localStorage.getItem(e);null===n&&localStorage.setItem(e,t),n=localStorage.getItem(e),s(n)}),[e,t]),{value:r,setValue:function(t){localStorage.setItem(e,t),s(t)}}}("finnhub_symbols","AAPL,TSLA,AMD,NVDA,INTC"),t=e.value,n=e.setValue;return{symbols:null===t||void 0===t?void 0:t.split(",").map((function(e){return e.trim()})),setSymbols:function(e){n(e.map((function(e){return e.trim()})).join(", "))}}},b=function(e){var t=e.symbols,n=e.setSymbols,a=Object(c.useState)(!0),r=Object(i.a)(a,2),s=r[0],u=r[1],l=Object(c.useState)([]),b=Object(i.a)(l,2),j=b[0],f=b[1];Object(c.useEffect)((function(){t&&s&&(console.log("symbols",t),f(t),u(!1))}),[t,s]);return Object(o.jsx)("div",{className:"symbols-editor",children:Object(o.jsx)("form",{onSubmit:function(e){e.preventDefault(),n(j)},children:Object(o.jsx)("input",{type:"text",value:j.join(","),onChange:function(e){var t=e.currentTarget.value.split(",");f(t)}})})})},j=n(7),f=n.n(j),d=n(10),h=n(12),p=n.n(h),O=n(30),m=n.n(O),v=[],g=function(e,t){v.push({url:e,callback:t})},x=function(){var e=Object(d.a)(f.a.mark((function e(){var t,n,c,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.length){e.next=8;break}return t=v.shift(),n=t.url,c=t.callback,e.next=4,m.a.get(n);case 4:a=e.sent,r=a.data,console.log(n),c(r);case 8:setTimeout(x,1e3);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=n(4),S=n(34),k=n(31);y.d.register(y.c,y.i,y.k,y.h,y.o,y.p,y.f);var w=function(e){var t=e.chartData;if(!t||!t.length)return Object(o.jsx)("div",{className:"spinner-container",children:Object(o.jsx)(k.PulseSpinner,{color:"#839496"})});var n={labels:t.map((function(e){return e.x})),datasets:[{data:t.map((function(e){return e.y})),label:"oops",borderColor:t[t.length-1].y-t[0].y<0?"#dc322f":"#859900",borderWidth:1.5}]};return Object(o.jsx)("div",{style:{height:"5em",width:"100%",marginTop:".5em"},children:Object(o.jsx)(S.a,{options:{responsive:!0,maintainAspectRatio:!1,outerHeight:80,backgroundColor:"red",scales:{y:{display:!1},x:{display:!1}},elements:{point:{radius:0}},plugins:{legend:{position:"top",display:!1},title:{display:!1,text:"Chart.js Line Chart"},tooltip:{enabled:!1},decimation:{enabled:!1}}},data:n})})},C=function(e){var t=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(0),o=Object(i.a)(s,2),u=o[0],l=o[1],b=Object(c.useState)(0),j=Object(i.a)(b,2),O=j[0],m=j[1],v=Object(c.useState)([]),x=Object(i.a)(v,2),y=x[0],S=x[1],k=Object(c.useState)(0),w=Object(i.a)(k,2),C=w[0],I=w[1],N=Object(c.useState)(0),T=Object(i.a)(N,2),D=T[0],A=T[1],_=Object(c.useCallback)(function(){var t=Object(d.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c="https://finnhub.io/api/v1/stock/profile2?symbol=".concat(e,"&token=").concat(n),g(c,(function(e){r(e.name)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),E=Object(c.useCallback)(function(){var t=Object(d.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c="https://finnhub.io/api/v1/quote?symbol=".concat(e,"&token=").concat(n),g(c,(function(e){var t=e.c,n=e.c-e.o,c=Object(h.now)();l(t),m(n),I(c)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),F=Object(c.useCallback)(function(){var t=Object(d.a)(f.a.mark((function t(n){var c,a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=p()().unix(),a=p()().subtract(6,"months").unix(),r="https://finnhub.io/api/v1/stock/candle?symbol=".concat(e,"&token=").concat(n,"&resolution=D&from=").concat(a,"&to=").concat(c),g(r,(function(e){var t=[];if(e.c)for(var n=0;n<e.c.length;n++)t.push({x:n+1,y:e.c[n]});S(t),A(Object(h.now)())}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(c.useEffect)((function(){console.log("dependencies:",[e,_,E,F]);var t=localStorage.getItem("finnhub_api_token");_(t),E(t),F(t);var n=setInterval((function(){E(t)}),3e4),c=setInterval((function(){F(t)}),3e5);return function(){clearInterval(n),clearInterval(c)}}),[e,_,E,F]),{name:a,current:u,change:O,chartData:y,quoteUpdatedTime:C,chartUpdatedTime:D}}(e.symbol),n=t.name,a=t.current,r=t.change,s=t.chartData,u=Object(c.useState)(a),l=Object(i.a)(u,2),b=l[0],j=l[1],O=Object(c.useState)(0),m=Object(i.a)(O,2),v=m[0],x=m[1],y=Object(c.useState)("widget"),S=Object(i.a)(y,2),k=S[0],C=S[1];return Object(c.useEffect)((function(){a&&b&&a!==b&&x(a-b),j(a)}),[a,b]),Object(c.useEffect)((function(){if(0!==v){C(v<0?"widget blink-red":"widget blink-green");var e=setTimeout((function(){C("widget")}),1e3);return function(){clearTimeout(e)}}}),[v]),Object(o.jsxs)("div",{className:k,children:[Object(o.jsxs)("div",{className:"grid-container",children:[Object(o.jsxs)("div",{className:"profile",children:[Object(o.jsx)("h3",{children:e.symbol}),Object(o.jsx)("p",{children:n})]}),Object(o.jsxs)("div",{className:"quote",children:[Object(o.jsx)("h3",{children:a}),Object(o.jsx)("p",{className:r<0?"red":"green",children:Math.round(100*r)/100})]})]}),Object(o.jsx)(w,{chartData:s})]})},I=function(){var e=l(),t=e.symbols,n=e.setSymbols;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(b,{symbols:t,setSymbols:n}),Object(o.jsx)("div",{className:"widget-list",children:null===t||void 0===t?void 0:t.map((function(e){return Object(o.jsx)(C,{symbol:e},e)}))})]})},N=function(){return localStorage.getItem("finnhub_api_token")?Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(I,{})}):Object(o.jsx)(u,{})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};n(66);s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(N,{})}),document.getElementById("root")),x(),T()}},[[67,1,2]]]);
//# sourceMappingURL=main.267f0ecd.chunk.js.map