{"version":3,"sources":["Widget.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Widget","props","useState","name","setName","current","setCurrent","change","setChange","chartData","setChartData","getProfile","useCallback","token","a","axios","get","symbol","resp","data","getQuote","c","o","getCandles","end","moment","unix","start","subtract","console","log","i","length","push","x","y","useEffect","localStorage","getItem","clearInterval","window","quoteInterval","setInterval","className","Math","round","width","height","margin","style","fill","strokeWidth","color","GetToken","setToken","onSubmit","e","preventDefault","setItem","location","href","type","onChange","currentTarget","value","App","symbolsStr","split","map","trim","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6c4d3e6d.chunk.js","sourcesContent":["import axios from \"axios\"\nimport moment from \"moment\"\nimport React, { useCallback, useEffect, useState } from \"react\"\n\n// @ts-ignore\nimport { XYPlot, LineSeries } from 'react-vis'\n\nimport \"./Widget.css\"\n\nexport interface WidgetProps {\n    symbol: string\n}\n\nconst Widget = (props: WidgetProps) => {\n    const [name, setName] = useState(\"\")\n    const [current, setCurrent] = useState(0.0)\n    const [change, setChange] = useState(0.0)\n    const [chartData, setChartData] = useState<any[]>([])\n\n\n    const getProfile = useCallback(async (token: string) => {\n        const resp = await axios.get(`https://finnhub.io/api/v1/stock/profile2?symbol=${props.symbol}&token=${token}`)\n        setName(resp.data.name)\n    }, [props.symbol])\n\n    const getQuote = useCallback(async (token: string) => {\n        const resp = await axios.get(`https://finnhub.io/api/v1/quote?symbol=${props.symbol}&token=${token}`)\n        setCurrent(resp.data.c)\n        setChange(resp.data.c - resp.data.o)\n    }, [props.symbol])\n\n    const getCandles = useCallback(async (token: string) => {\n        const end = moment().unix()\n        const start = moment().subtract(6, 'months').unix()\n\n        console.log(end - start)\n\n        const resp = await axios.get(`https://finnhub.io/api/v1/stock/candle?symbol=${props.symbol}&token=${token}&resolution=D&from=${start}&to=${end}`)\n        // const resp = await axios.get(`https://finnhub.io/api/v1/stock/candle?symbol=${props.symbol}&token=${token}&resolution=1&from=1631022248&to=1631627048`)\n\n        const data = []\n\n        console.log(resp.data)\n\n        for (let i = 0; i < resp.data.c.length; i++) {\n            data.push({ x: i + 1, y: resp.data.c[i] })\n        }\n\n        setChartData(data)\n    }, [props.symbol])\n\n    useEffect(() => {\n        const token = localStorage.getItem(\"finnhub_api_token\")!\n        getProfile(token)\n        // getQuote(token)\n        getCandles(token)\n\n        clearInterval((window as any).quoteInterval);\n        (window as any).quoteInterval = setInterval(() => {\n            getQuote(token)\n        }, 5000)\n\n    }, [getProfile, getQuote, getCandles])\n\n    return <div className=\"widget\">\n        <div className=\"grid-container\">\n            <div className=\"profile\">\n                <h3>{props.symbol}</h3>\n                <p>{name}</p>\n            </div>\n\n            <div className=\"quote\">\n                <h3>{current}</h3>\n                <p className={change < 0 ? \"red\" : \"green\"}>{Math.round(change * 100) / 100}</p>\n            </div>\n        </div>\n\n        {\n            chartData.length\n                ? <div className=\"chart\">\n                    <XYPlot width={300} height={80} margin={0} style={{ fill: \"none\" }} >\n                        <LineSeries strokeWidth={2} color={chartData[chartData.length - 1].y - chartData[0].y < 0 ? \"#dc322f\" : \"#859900\"} data={chartData} />\n                    </XYPlot>\n                </div>\n                : null\n        }\n    </div>\n}\n\nexport default Widget","import React, { ChangeEvent, FormEvent, useState } from 'react';\nimport Widget from './Widget';\n\nimport './App.css';\n\nconst GetToken = () => {\n\tconst [token, setToken] = useState(\"\")\n\n\tconst onChange = (e: ChangeEvent<HTMLInputElement>) => {\n\t\tsetToken(e.currentTarget.value)\n\t}\n\n\tconst onSubmit = (e: FormEvent<HTMLFormElement>) => {\n\t\te.preventDefault()\n\t\tlocalStorage.setItem(\"finnhub_api_token\", token)\n\t\twindow.location.href = \"/\"\n\t}\n\n\treturn <div>\n\t\t<form onSubmit={onSubmit} className=\"token\">\n\t\t\t<label><a href=\"https://finnhub.io/\">Finnhub</a> API Token</label>\n\t\t\t<div><input type=\"text\" onChange={onChange} /></div>\n\t\t\t<div><input type=\"submit\" value=\"Submit\" /></div>\n\t\t</form>\n\t</div>\n}\n\nconst App = () => {\n\tif (!localStorage.getItem(\"finnhub_api_token\")) {\n\t\treturn <GetToken />\n\t}\n\n\tlet symbolsStr = localStorage.getItem(\"finnhub_symbols\")\n\n\tif (!symbolsStr) {\n\t\tlocalStorage.setItem(\"finnhub_symbols\", \"AAPL, NVDA\")\n\t\tsymbolsStr = \"AAPL, NVDA\"\n\t}\n\n\treturn <div className=\"App\">\n\t\t{\n\t\t\tsymbolsStr?.split(\",\").map((symbol: string) => <Widget key={symbol.trim()} symbol={symbol.trim()} />)\n\t\t}\n\t</div>\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}